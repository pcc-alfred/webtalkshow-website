---
interface Props {
  number: number
  title: string
  description: string
  date: Date
  duration: string
  slug: string
  guests?: string[]
  topics?: string[]
}

const { number, title, description, date, duration, slug, guests, topics } = Astro.props

const formattedDate = date.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'short',
  day: 'numeric'
})
---

<a href={`/episodes/${slug}`} class="episode-card group block bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden hover:border-slate-300 dark:hover:border-slate-600 hover:shadow-lg transition-all">
  <div class="p-5">
    <!-- Episode Number & Title -->
    <div class="text-xs text-indigo-600 dark:text-indigo-400 font-medium mb-1">Episode #{number}</div>
    <h3 class="font-semibold text-slate-900 dark:text-white line-clamp-2 mb-2 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors">{title}</h3>
    
    <!-- Description -->
    <p class="text-slate-600 dark:text-slate-300 text-sm line-clamp-2 mb-3">{description}</p>
    
    <!-- Meta -->
    <div class="flex flex-wrap items-center gap-3 text-xs text-slate-500 dark:text-slate-400">
      <span>{formattedDate}</span>
      <span>â€¢</span>
      <span>{duration}</span>
      {guests && guests.length > 0 && (
        <span class="text-slate-400 dark:text-slate-500">with {guests.slice(0, 2).join(', ')}{guests.length > 2 ? ` +${guests.length - 2}` : ''}</span>
      )}
    </div>
    
    <!-- Topics -->
    {topics && topics.length > 0 && (
      <div class="flex flex-wrap gap-1.5 mt-3">
        {topics.slice(0, 3).map((topic) => (
          <span class="px-2 py-0.5 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs rounded-full">{topic}</span>
        ))}
        {topics.length > 3 && (
          <span class="px-2 py-0.5 text-slate-400 dark:text-slate-500 text-xs">+{topics.length - 3}</span>
        )}
      </div>
    )}
  </div>
</a>
